---
title: "Data Description"

output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: "hide"
---



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Data cleaning

* Add amount of wines, fruits, meat ... into total amount spend

* Create a prefer web or store option: number of web > store, prefer "web", vice versa

* Add total of accepted compaigns

* `Age`: be customer date minus year birth

* `Marital_Status` in  ("Absurd", "Alone","YOLO","Widow") merged into "Other"

* Remove missing values in `Income`

* Final data has variables  `Education``Marital_Status` `Income`   `Kidhome` `Teenhome`  `Recency`  `WebVisits`   `Complain`      `Total_amount`   `Prefer_web_or_store` `Accept_camps`  `Age`, other variables omitted

* Final data has 2216 observations with 12 variables

```{r}
# Load libraries
library(readr)
library(tidyverse)

# Read in data
data = read_csv("marketing_campaign.csv")

# Data manipulation
data = data %>%
  select(-ID, -Z_CostContact, -Z_Revenue, -NumCatalogPurchases, -NumDealsPurchases) %>%
  mutate(
    Total_amount = MntWines + MntFruits + MntMeatProducts + MntFishProducts + MntSweetProducts + MntGoldProds,
    Prefer_web_or_store = ifelse(NumStorePurchases > NumWebPurchases, "store", "web"),
    Accept_camps = AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response,
    Age = as.numeric(substr(Dt_Customer, 7, 10)) - Year_Birth
  ) %>%
  rename(WebVisits = NumWebVisitsMonth) %>%
  select(-MntWines, -MntFruits, -MntMeatProducts, -MntFishProducts, -MntSweetProducts, -MntGoldProds,-AcceptedCmp1, -AcceptedCmp2, -AcceptedCmp3, -AcceptedCmp4, -AcceptedCmp5, -Response, -Year_Birth, -Dt_Customer, -NumWebPurchases, -NumStorePurchases) %>%
  drop_na()

# Adjust Marital Status
data$Marital_Status[data$Marital_Status %in% c("Absurd", "Alone", "YOLO", "Widow")] = "Other"

```
